أكيد، هذا ملف README مضبوط بالعربي وبشكل رسمي وواضح مع تفاصيل بسيطة مهمة للمدير:

---

# نظام إدارة الموارد البشرية (HR System) - الواجهة الخلفية

هذا المشروع هو نظام backend لإدارة بيانات الموارد البشرية في شركة، يشمل إدارة الموظفين، الرواتب، البدلات، الإجازات، والعلاقات بين الموظفين والمديرين. تم تطويره باستخدام Laravel واتباع منهجية التطوير المعتمد على الاختبارات (TDD).

---

## نظرة عامة على المشروع

يهدف النظام إلى توفير الوظائف الأساسية لإدارة بيانات الموظفين بشكل آمن ومرن، ويشمل:

* إدارة بيانات الموظفين الأساسية
* تتبع الإجازات والبدلات الخاصة بالموظفين
* إدارة قواعد الرواتب الشهرية
* تعريف علاقات الموظفين مع المديرين
* تطبيق قواعد عمل هامة مثل:

  * عدم السماح بعدد إجازات سلبي
  * ضمان عدم تكرار كود الموظف
  * ضمان عدم تكرار الرواتب لنفس الشهر
* توفير API RESTful للعمليات الأساسية والبحث وحساب الرواتب

---

## منهجية العمل

* **التطوير المعتمد على الاختبارات (TDD):** يبدأ كل متطلب باختبار فاشل، ثم كتابة كود يمرره فقط.
* **المهاجرات (Migrations):** لإنشاء الجداول والبنية المطلوبة في قاعدة البيانات.
* **إلوكونت (Eloquent):** لإجراء جميع العمليات على قواعد البيانات وعلاقات النماذج.
* المشروع يشمل:

  * الموديلات (Models)
  * المهاجرات (Migrations)
  * الكنترولرز (Controllers)
  * اختبارات الوحدة والميزات (Unit & Feature Tests)

---

## تفاصيل أجزاء المشروع

### الجزء الأول: إنشاء الجداول (Migrations)

* جدول الموظفين (employees) مع كل الحقول المطلوبة
* جدول إجازات الموظف (employee\_vacations) يحتوي على عدد الإجازات المتاحة والمستخدمة، مرتبط بموظف
* جدول بدلات الموظف (employee\_allowances) مرتبط بموظف
* جدول أساس الرواتب (employee\_salary\_bases) يضمن وجود سجل راتب فريد لكل موظف لكل شهر

### الجزء الثاني: النماذج والعلاقات (Models & Relations)

* نموذج الموظف (Employee) يحتوي على الحقول القابلة للتعديل وعلاقات hasMany مع الإجازات والبدلات والأساسيات
* نماذج إجازات الموظف وبدلات الموظف وأساسيات الراتب تنتمي إلى الموظف (belongsTo)
* علاقة موظف-مدير (many-to-many) عبر جدول محوري (employees\_managers)
* نموذج وجداول إضافية مرتبطة بالموظف حسب الحاجة

### الجزء الثالث: قواعد العمل (Business Rules)

* عدد أيام الإجازة لا يمكن أن يكون سالباً (يتم التحقق من صحة البيانات)
* كود الموظف يجب أن يكون فريداً (Unique)
* لا يسمح بسجلات راتب متكررة لنفس الموظف ونفس الشهر
* عند حذف موظف، يتم حذف جميع سجلاته المرتبطة (إجازات، بدلات، رواتب، إضافات) تلقائياً (Cascade Delete)

### الجزء الرابع: واجهة برمجة التطبيقات (API)

* واجهات CRUD كاملة للموظفين والإجازات والبدلات
* إمكانية البحث عن موظفين بالاسم الكامل، الكود، أو البريد الإلكتروني
* واجهة لحساب إجمالي الراتب الشهري (الأساسي + الإضافات + البدلات)

---

## كيفية الإعداد

1. استنساخ المشروع:

```bash
git clone <repository-url>
```

2. تثبيت الاعتمادات:

```bash
composer install
```

3. نسخ ملف البيئة وضبط إعدادات قاعدة البيانات:

```bash
cp .env.example .env
```

ثم تعديل `.env` حسب إعدادات قاعدة البيانات لديك
4\. تشغيل المهاجرات:

```bash
php artisan migrate
```

5. (اختياري) تشغيل البيانات التجريبية:

```bash
php artisan db:seed
```

6. تشغيل الخادم المحلي:

```bash
php artisan serve
```

---

## تشغيل الاختبارات

لتشغيل جميع اختبارات النظام:

```bash
php artisan test
```

تشمل الاختبارات التحقق من صحة الجداول، النماذج، قواعد العمل، وواجهات الـ API.

---

## توثيق نقاط نهاية الـ API (API Endpoints)

| الطريقة | الرابط                       | الوصف                                   |
| ------- | ---------------------------- | --------------------------------------- |
| GET     | `/api/employees`             | عرض جميع الموظفين                       |
| POST    | `/api/employees`             | إنشاء موظف جديد                         |
| GET     | `/api/employees/{id}`        | عرض تفاصيل موظف معين                    |
| PUT     | `/api/employees/{id}`        | تحديث بيانات موظف                       |
| DELETE  | `/api/employees/{id}`        | حذف موظف مع حذف بياناته المرتبطة        |
| GET     | `/api/employees/search`      | البحث عن موظف بالاسم أو الكود أو البريد |
| GET     | `/api/employees/{id}/salary` | الحصول على إجمالي راتب الموظف الشهري    |
| CRUD    | `/api/employee-vacations`    | إدارة إجازات الموظف                     |
| CRUD    | `/api/employee-allowances`   | إدارة بدلات الموظف                      |

---

